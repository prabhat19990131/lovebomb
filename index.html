<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For You ‚ù§Ô∏è</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            overflow: hidden;
            background: linear-gradient(180deg, #ffdde1 0%, #ee9ca7 100%);
            touch-action: manipulation; /* Improves touch response */
            height: 100dvh; /* Fix for mobile browser address bars */
        }
        
        h1, h2 {
            font-family: 'Dancing Script', cursive;
        }

        .btn-shadow {
            box-shadow: 0 10px 15px -3px rgba(255, 65, 108, 0.3), 0 4px 6px -2px rgba(255, 65, 108, 0.1);
        }

        /* Pulse animation for the main container */
        @keyframes float-gentle {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        .float {
            animation: float-gentle 3s ease-in-out infinite;
        }

        /* Heartbeat */
        @keyframes pound {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .pound {
            animation: pound 0.8s infinite;
        }

        /* Canvas for effects */
        #effects-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
        }

        .hidden-transition {
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.5s ease-out;
            pointer-events: none;
        }

        .visible-transition {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }
    </style>
</head>
<body class="w-screen flex flex-col items-center justify-center relative select-none">

    <canvas id="effects-canvas"></canvas>

    <!-- MAIN PROPOSAL CARD -->
    <div id="proposal-card" class="z-20 bg-white/90 backdrop-blur-md p-8 sm:p-10 md:p-14 rounded-[2rem] shadow-2xl w-[90%] max-w-md md:max-w-2xl text-center border-4 border-pink-200 float transition-all duration-500">
        
        <div class="mb-4 text-6xl sm:text-7xl md:text-9xl animate-bounce">
            üíå
        </div>

        <h1 class="text-4xl sm:text-5xl md:text-7xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-red-600 mb-4 font-bold leading-tight py-2">
            Will you be my Valentine?
        </h1>
        
        <p class="text-gray-500 text-lg sm:text-xl md:text-2xl mb-8 font-semibold">Please say yes! ü•∫ üëÄ</p>
        
        <!-- Button Container: Flex-col for mobile, Row for tablet+ -->
        <div class="flex flex-col md:flex-row justify-center items-center gap-6 md:gap-8 w-full min-h-[8rem]">
            <!-- Yes Button -->
            <button id="yesBtn" onclick="triggerLoveBomb()" 
                class="w-full md:w-auto min-w-[140px] bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white font-black py-4 px-8 md:px-12 rounded-full text-xl md:text-2xl shadow-xl transform transition hover:scale-105 active:scale-95 border-b-4 border-pink-700 z-10">
                YES! üòç
            </button>

            <!-- No Button -->
            <!-- Position is static initially, becomes fixed on interaction -->
            <button id="noBtn" 
                class="w-full md:w-auto min-w-[140px] bg-gray-300 hover:bg-gray-400 text-gray-700 font-bold py-4 px-8 md:px-12 rounded-full text-lg md:text-xl shadow-lg border-b-4 border-gray-400 transition-all duration-100 ease-out touch-none">
                No üò¢
            </button>
        </div>
    </div>

    <!-- SUCCESS MESSAGE (Hidden initially) -->
    <div id="success-msg" class="fixed inset-0 z-30 flex flex-col items-center justify-center hidden-transition bg-white/30 backdrop-blur-sm p-4">
        
        <!-- Added max-h and overflow-auto for small landscape screens -->
        <div class="bg-white p-8 md:p-12 rounded-3xl shadow-2xl text-center border-8 border-pink-300 transform rotate-2 w-full max-w-md md:max-w-xl max-h-[90vh] overflow-y-auto">
            <h1 class="text-5xl sm:text-6xl md:text-8xl text-pink-600 mb-4 pound">YAY!!! üéâ</h1>
            <p class="text-xl sm:text-2xl md:text-4xl text-gray-800 font-bold mb-8">You're officially mine now! ‚ù§Ô∏è</p>
            
            <div class="text-5xl sm:text-6xl md:text-7xl animate-pulse tracking-widest mb-6">
                üë©‚Äç‚ù§Ô∏è‚Äçüë® üíç üíí
            </div>
            
            <p class="mt-4 text-pink-400 text-xs sm:text-sm font-bold uppercase tracking-widest">No Returns ‚Ä¢ No Refunds</p>
            
            <div class="mt-8 p-4 bg-pink-100 rounded-xl border-2 border-pink-200 animate-bounce">
                <p class="text-lg sm:text-xl md:text-2xl text-pink-600 font-bold">Since you pressed YES,<br>Please DM me! üíå</p>
            </div>
        </div>

    </div>

    <script>
        const canvas = document.getElementById('effects-canvas');
        const ctx = canvas.getContext('2d');
        const noBtn = document.getElementById('noBtn');
        const card = document.getElementById('proposal-card');
        const successMsg = document.getElementById('success-msg');
        
        let width, height;
        let particles = [];
        
        // Resize canvas
        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        // --- PARTICLE SYSTEM (HEARTS) ---
        class Heart {
            constructor(x, y, type = 'fountain') {
                this.x = x;
                this.y = y;
                this.type = type; // 'fountain' or 'rain'
                
                const sizeBase = width < 600 ? 15 : 25;
                this.size = Math.random() * sizeBase + 10;
                
                // Random colors
                const colors = ['#ff0000', '#ff1493', '#ff69b4', '#ff4500', '#db7093'];
                this.color = colors[Math.floor(Math.random() * colors.length)];
                
                // Physics
                if (type === 'explosion') {
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 10 + 2;
                    this.vx = Math.cos(angle) * speed;
                    this.vy = Math.sin(angle) * speed;
                    this.gravity = 0.2;
                } else if (type === 'rain') {
                    this.vx = Math.random() * 2 - 1;
                    this.vy = Math.random() * 3 + 2;
                    this.gravity = 0.05;
                }
                
                this.rotation = Math.random() * 360;
                this.rotationSpeed = (Math.random() - 0.5) * 4;
                this.opacity = 1;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += this.gravity;
                this.rotation += this.rotationSpeed;
                
                if (this.type === 'explosion') {
                    this.opacity -= 0.005;
                }
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = this.opacity;
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation * Math.PI / 180);
                
                // Draw Heart Shape
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.moveTo(0, 0);
                // Standard heart drawing logic
                const s = this.size / 100; // scale
                ctx.scale(s, s);
                ctx.beginPath();
                ctx.bezierCurveTo(-40, -50, -90, -30, -90, 20);
                ctx.bezierCurveTo(-90, 80, 0, 140, 0, 140);
                ctx.bezierCurveTo(0, 140, 90, 80, 90, 20);
                ctx.bezierCurveTo(90, -30, 40, -50, 0, 0);
                ctx.fill();
                
                ctx.restore();
            }
        }

        function animate() {
            ctx.clearRect(0, 0, width, height);
            
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.update();
                p.draw();
                
                // Remove off-screen or invisible particles
                if (p.y > height + 100 || p.opacity <= 0) {
                    particles.splice(i, 1);
                }
            }
            
            // Add rain occasionally
            if (isRaining) {
                if (Math.random() < 0.3) { // Density of rain
                     particles.push(new Heart(Math.random() * width, -50, 'rain'));
                }
            }
            
            requestAnimationFrame(animate);
        }

        // Start loop
        let isRaining = false;
        animate();

        // --- BUTTON LOGIC ---
        
        function moveButton(e) {
            // Check if user is trying to tap on mobile
            if(e && e.type === 'touchstart') e.preventDefault();
            
            const btnWidth = noBtn.offsetWidth;
            const btnHeight = noBtn.offsetHeight;
            
            // Get current window dimensions explicitly to ensure accuracy on resize/scroll
            const winWidth = window.innerWidth;
            const winHeight = window.innerHeight;
            
            // Define strict boundaries with padding to avoid edges/bars
            const xPadding = 20;
            const yPadding = 40; // Larger vertical padding for mobile browser bars
            
            const maxX = winWidth - btnWidth - xPadding;
            const maxY = winHeight - btnHeight - yPadding;
            
            const minX = xPadding;
            const minY = yPadding;
            
            // Generate random position
            let randomX = Math.random() * (maxX - minX) + minX;
            let randomY = Math.random() * (maxY - minY) + minY;
            
            // Clamp values to strictly ensure button stays inside visible area
            randomX = Math.max(minX, Math.min(randomX, maxX));
            randomY = Math.max(minY, Math.min(randomY, maxY));
            
            noBtn.style.position = 'fixed';
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
            noBtn.style.zIndex = 100;
            
            // Change text occasionally for fun
            const texts = ["Nope!", "Try Again!", "Too Slow!", "Cant Catch Me!", "Seriously?", "Just Click Yes!"];
            noBtn.innerText = texts[Math.floor(Math.random() * texts.length)];
        }

        // Add events
        noBtn.addEventListener('mouseenter', moveButton);
        noBtn.addEventListener('touchstart', moveButton);
        noBtn.addEventListener('click', moveButton); // Fallback

        // --- LOVE BOMB LOGIC ---
        function triggerLoveBomb() {
            // 1. Hide card logic
            card.style.opacity = '0';
            card.style.transform = 'scale(0.8)';
            setTimeout(() => card.style.display = 'none', 500);

            // 2. Show Success
            successMsg.classList.remove('hidden-transition');
            successMsg.classList.add('visible-transition');
            successMsg.style.display = 'flex';

            // 3. Explode Hearts from center
            for (let i = 0; i < 200; i++) {
                particles.push(new Heart(width / 2, height / 2, 'explosion'));
            }
            
            // 4. Start Rain
            isRaining = true;
            
            // 5. Change BG color slowly
            document.body.style.transition = "background 3s ease";
            document.body.style.background = "linear-gradient(180deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%)";
        }
    </script>
</body>
</html>
